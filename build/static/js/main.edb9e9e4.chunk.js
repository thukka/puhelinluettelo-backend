(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),u=n(4),a=n(3),i=n(1),o=n(0),s=function(e){return Object(o.jsxs)(o.Fragment,{children:[e.name," ",e.number," ",Object(o.jsx)("button",{onClick:function(){return e.RemoveContact(e.personId,e.name)},children:"delete"})," ",Object(o.jsx)("br",{})]})},d=function(e){var t=e.persons,n=e.filterName,r=e.RemoveContact;return 0===n.length?t.map((function(e){return Object(o.jsx)(s,{personId:e.id,name:e.name,number:e.number,RemoveContact:r},e.name)})):t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(o.jsx)(s,{personId:e.id,name:e.name,number:e.number,RemoveContact:r},e.name)}))},l=function(e){var t=e.filterName,n=e.inputHandleFilter;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:t,onChange:n})]})},b=function(e){var t=e.SubmitFormAction,n=e.newName,r=e.newNumber,c=e.inputHandle,u=e.inputHandlePhone;return Object(o.jsxs)("form",{onSubmit:t,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:n,onChange:c})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:u})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.message,n=e.isError;if(null===t)return null;var r={color:"green",fontSize:24,borderStyle:"solid",padding:10,borderRadius:5,marginBottom:10},c=Object(u.a)(Object(u.a)({},r),{},{color:"red"});return!0===n?Object(o.jsx)("div",{style:c,children:t}):Object(o.jsx)("div",{style:r,children:t})},m=n(5),f=n.n(m),h="/api/persons",O=function(){return f.a.get(h).then((function(e){return e.data}))},p=function(e){return f.a.post(h,e).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e,t){return f.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},w=(n(39),function(e,t){return setTimeout((function(){e(null),t(!1)}),5e3)}),g=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),s=Object(a.a)(c,2),m=s[0],f=s[1],h=Object(i.useState)(""),g=Object(a.a)(h,2),C=g[0],S=g[1],y=Object(i.useState)(""),N=Object(a.a)(y,2),E=N[0],H=N[1],R=Object(i.useState)(null),F=Object(a.a)(R,2),k=F[0],I=F[1],P=Object(i.useState)(!1),A=Object(a.a)(P,2),B=A[0],D=A[1];Object(i.useEffect)((function(){O().then((function(e){return r(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(j,{message:k,isError:B}),Object(o.jsx)(l,{filterName:E,inputHandleFilter:function(e){return H(e.target.value)}}),Object(o.jsx)("h2",{children:"add new"}),Object(o.jsx)(b,{SubmitFormAction:function(e){if(e.preventDefault(),function(e){var t=!1;return n.forEach((function(n){n.name===e&&(t=!0)})),t}(m)){if(window.confirm("".concat(m," is already on the list, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===m})),c=Object(u.a)(Object(u.a)({},t),{},{number:C});x(c.id,c).then((function(e){r(n.map((function(t){return t.id!==c.id?t:e}))),I("".concat(m," number updated"))})).catch((function(e){D(!0),I("Error with updating '".concat(m,"', user might have been already deleted from the server")),O().then((function(e){return r(e)}))})),w(I,D)}}else p({name:m,number:C}).then((function(e){r(n.concat(e)),f(""),S(""),I("".concat(e.name," added to the list"))})),w(I,D)},newName:m,newNumber:C,inputHandle:function(e){return f(e.target.value)},inputHandlePhone:function(e){return S(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("div",{children:Object(o.jsx)(d,{persons:n,filterName:E,RemoveContact:function(e,t){window.confirm("Do you really want to delete ".concat(t,"?"))&&v(e).then(r(n.filter((function(t){return t.id!==e})))).then(I("".concat(t," was deleted"))).catch((function(e){D(!0),I("Error with updating '".concat(t,"', user might have been already deleted from the server")),O().then((function(e){return r(e)}))})),w(I,D)}})})]})};c.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.edb9e9e4.chunk.js.map