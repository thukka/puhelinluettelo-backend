(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),a=n(4),u=n(3),o=n(1),i=n(0),s=function(e){return Object(i.jsxs)(i.Fragment,{children:[e.name," ",e.number," ",Object(i.jsx)("button",{onClick:function(){return e.RemoveContact(e.personId,e.name)},children:"delete"})," ",Object(i.jsx)("br",{})]})},d=function(e){var t=e.persons,n=e.filterName,r=e.RemoveContact;return 0===n.length?t.map((function(e){return Object(i.jsx)(s,{personId:e.id,name:e.name,number:e.number,RemoveContact:r},e.name)})):t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(i.jsx)(s,{personId:e.id,name:e.name,number:e.number,RemoveContact:r},e.name)}))},l=function(e){var t=e.filterName,n=e.inputHandleFilter;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:t,onChange:n})]})},b=function(e){var t=e.SubmitFormAction,n=e.newName,r=e.newNumber,c=e.inputHandle,a=e.inputHandlePhone;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:r,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.message,n=e.isError;if(null===t)return null;var r={color:"green",fontSize:24,borderStyle:"solid",padding:10,borderRadius:5,marginBottom:10},c=Object(a.a)(Object(a.a)({},r),{},{color:"red"});return!0===n?Object(i.jsx)("div",{style:c,children:t}):Object(i.jsx)("div",{style:r,children:t})},f=n(5),m=n.n(f),h="/api/persons",O=function(){return m.a.get(h).then((function(e){return e.data}))},p=function(e){return m.a.post(h,e).then((function(e){return e.data}))},v=function(e){return m.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},w=(n(39),function(e,t){return setTimeout((function(){e(null),t(!1)}),5e3)}),g=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),s=Object(u.a)(c,2),f=s[0],m=s[1],h=Object(o.useState)(""),g=Object(u.a)(h,2),C=g[0],S=g[1],y=Object(o.useState)(""),N=Object(u.a)(y,2),E=N[0],H=N[1],R=Object(o.useState)(null),F=Object(u.a)(R,2),k=F[0],I=F[1],P=Object(o.useState)(!1),A=Object(u.a)(P,2),B=A[0],D=A[1];Object(o.useEffect)((function(){O().then((function(e){return r(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:k,isError:B}),Object(i.jsx)(l,{filterName:E,inputHandleFilter:function(e){return H(e.target.value)}}),Object(i.jsx)("h2",{children:"add new"}),Object(i.jsx)(b,{SubmitFormAction:function(e){if(e.preventDefault(),function(e){var t=!1;return n.forEach((function(n){n.name===e&&(t=!0)})),t}(f)){if(window.confirm("".concat(f," is already on the list, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===f})),c=Object(a.a)(Object(a.a)({},t),{},{number:C});x(c.id,c).then((function(e){r(n.map((function(t){return t.id!==c.id?t:e}))),I("".concat(f," number updated"))})).catch((function(e){D(!0),I("Error with updating '".concat(f,"', user might have been already deleted from the server")),O().then((function(e){return r(e)}))})),w(I,D)}}else p({name:f,number:C}).then((function(e){r(n.concat(e)),m(""),S(""),I("".concat(e.name," added to the list"))})).catch((function(e){D(!0),I("".concat(e.response.data.error))})),w(I,D)},newName:f,newNumber:C,inputHandle:function(e){return m(e.target.value)},inputHandlePhone:function(e){return S(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("div",{children:Object(i.jsx)(d,{persons:n,filterName:E,RemoveContact:function(e,t){window.confirm("Do you really want to delete ".concat(t,"?"))&&v(e).then(r(n.filter((function(t){return t.id!==e})))).then(I("".concat(t," was deleted"))).catch((function(e){D(!0),I("Error with updating '".concat(t,"', user might have been already deleted from the server")),O().then((function(e){return r(e)}))})),w(I,D)}})})]})};c.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.dbfdb196.chunk.js.map